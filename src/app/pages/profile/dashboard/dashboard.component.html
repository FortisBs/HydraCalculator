<mat-card class="mat-elevation-z8 profile-container">

  <mat-card-title>
    <span>Your delegates</span>
    <button mat-mini-fab color="accent" class="add-btn" (click)="goToAddDelegate()">
      <mat-icon>add</mat-icon>
    </button>
  </mat-card-title>

  <mat-card-content>
    <mat-accordion>

      <mat-expansion-panel disabled>
        <mat-expansion-panel-header class="panel-header">
          <mat-panel-title class="username">Username</mat-panel-title>
          <mat-panel-description>Share rate</mat-panel-description>
        </mat-expansion-panel-header>
      </mat-expansion-panel>

      <mat-expansion-panel *ngFor="let del of ownDelegates; let i = index">
        <mat-expansion-panel-header>
          <mat-panel-title class="username">{{ del.username }}</mat-panel-title>
          <mat-panel-description>{{ del.shareRate | percent }}</mat-panel-description>
        </mat-expansion-panel-header>

        <div class="actions">
          <button mat-raised-button color="primary" (click)="openEdit(del, modalEdit)">Edit</button>
          <button mat-raised-button color="warn" (click)="onDeleteDelegate(i)">Delete</button>
        </div>
      </mat-expansion-panel>

    </mat-accordion>
  </mat-card-content>

</mat-card>

<ng-template #modalEdit>
  <h2 mat-dialog-title>Edit {{ editingDelegate.username }}</h2>
  <mat-dialog-content>
    <mat-form-field>
      <mat-label>Share rate</mat-label>
      <input matInput type="number" [(ngModel)]="editingDelegate.shareRate" min="0" max="1">
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-flat-button color="accent" (click)="saveEditedDelegate()">Save</button>
    <button mat-flat-button mat-dialog-close color="primary">Cancel</button>
  </mat-dialog-actions>
</ng-template>
